<app-navbar />

<app-page-banner />

<!-- <div class="pb-120 border-bottom"></div> -->

<!-- Courses -->
<div class="courses-area bg-f3f3f3 pt-120 pb-95">
    <div class="container">
        <div class="row justify-content-center">
            <div class="col-xl-4 col-md-6" *ngFor="let cdata of courses">
                <div class="single-course-box mb-25 position-relative">
                    <h3 class="fw-semibold">
                        <a routerLink="/course-details">
                            {{ cdata.courseCategoryName }}
                        </a>
                    </h3>
                    <!-- <p>{{ cdata.courseDescription }}</p> -->
                    <p
                        class="description-clamp-line-2"
                        style="cursor: pointer"
                        [innerHTML]="
                            getSanitizedContent(cdata.courseDescription)
                        "
                        data-bs-toggle="offcanvas"
                        data-bs-target="#courseDetails"
                        (click)="
                            handleOpenCourseDetails(
                                cdata.courseUid,
                                cdata.instructorRegId,
                                cdata.courseId
                            )
                        "
                    ></p>

                    <div class="instructor d-flex align-items-center">
                        <img
                            [src]="
                                getImagePath(
                                    cdata?.instructorProfilePic ||
                                        'images/teams/team1.jpg'
                                )
                            "
                            loading="lazy"
                            class="rounded-circle"
                            alt="user-image"
                        />
                        <div>
                            <h4 class="fw-medium">
                                {{ cdata.instructorName }}
                            </h4>
                            <span class="d-block"> Instructor </span>
                        </div>
                    </div>
                    <button
                        class="default-btn"
                        type="button"
                        data-bs-toggle="offcanvas"
                        data-bs-target="#courseDetails"
                        (click)="
                            handleOpenCourseDetails(
                                cdata.courseUid,
                                cdata.instructorRegId,
                                cdata.courseId
                            )
                        "
                    >
                        View Details
                    </button>
                    <!-- <a
                        [routerLink]="['/course-details']"
                        [queryParams]="{
                            courseUId: course.courseUid,
                            instructorRegId: course.instructorRegId,
                        }"
                        class="default-btn"
                    >
                        Enroll Now
                    </a> -->
                </div>
            </div>
        </div>
    </div>
</div>
<!-- End Courses -->
<!-- Offcanvas Sidebar -->
<div
    class="offcanvas offcanvas-end custom-offcanvas"
    tabindex="-1"
    id="courseDetails"
    aria-labelledby="courseDetailsLabel"
>
    <!-- Close Button -->
    <button
        type="button"
        class="btn-close position-absolute end-0 m-3 z-1"
        data-bs-dismiss="offcanvas"
        aria-label="Close"
    ></button>
    <!-- Custom Close Button (Outside Offcanvas) -->
    <button
        type="button"
        class="btn btn-light close-arrow"
        data-bs-dismiss="offcanvas"
        aria-label="Close"
    >
        <i class="bi bi-arrow-right-circle-fill text-white"></i>
    </button>

    <div class="offcanvas-header pb-3">
        <div class="w-100">
            <!-- Course Rating and Students -->
            <div class="d-flex justify-content-between align-items-center mb-2">
                <div
                    class="badge bg-primary bg-opacity-10 text-primary px-3 py-2 rounded-pill"
                >
                    <i class="bi bi-star-fill me-1"></i> 4.8 (120 reviews)
                </div>
                <div class="text-muted small" style="margin-right: 2rem">
                    <i class="bi bi-people-fill me-1"></i> 245 students enrolled
                </div>
            </div>

            <!-- Course Title -->
            <div class="d-flex justify-content-between align-items-center mb-2">
                <h2
                    class="offcanvas-title fw-bold mb-0"
                    id="courseDetailsLabel"
                >
                    {{ course?.courseTitle || "Course Title" }}
                </h2>
                <div>
                    <span class="badge btn-default text-warning fs-5 px-3 py-2"
                        >${{ coursePrice?.toFixed(2) }}</span
                    >
                </div>
            </div>
        </div>
    </div>

    <div class="offcanvas-body p-0">
        <!-- Tab Navigation -->
        <ul class="nav nav-tabs px-3" id="courseTabs" role="tablist">
            <li class="nav-item" role="presentation">
                <button
                    class="nav-link active"
                    id="overview-tab"
                    data-bs-toggle="tab"
                    data-bs-target="#overview"
                    type="button"
                    role="tab"
                >
                    <i class="bi bi-info-circle me-2"></i> Overview
                </button>
            </li>
            <li class="nav-item" role="presentation">
                <button
                    class="nav-link"
                    id="instructor-tab"
                    data-bs-toggle="tab"
                    data-bs-target="#instructor"
                    type="button"
                    role="tab"
                >
                    <i class="bi bi-person-video2 me-2"></i> Instructor
                </button>
            </li>
            <li class="nav-item" role="presentation">
                <button
                    class="nav-link"
                    id="enroll-tab"
                    data-bs-toggle="tab"
                    data-bs-target="#enroll"
                    type="button"
                    role="tab"
                >
                    <i class="bi bi-credit-card me-2"></i> Enroll Now
                </button>
            </li>
        </ul>

        <!-- Tab Content -->
        <div
            class="tab-content p-3"
            id="courseTabsContent"
            style="max-height: calc(100vh - 200px); overflow-y: auto"
        >
            <!-- Overview Tab -->
            <div
                class="tab-pane fade show active"
                id="overview"
                role="tabpanel"
            >
                <div
                    class="course-image-container mb-4 rounded-3 overflow-hidden"
                >
                    <img
                        [src]="
                            getImagePath(
                                course?.logo ||
                                    'assets/images/course/course1.jpg'
                            )
                        "
                        class="img-fluid w-100"
                        style="height: 200px; object-fit: cover"
                        alt="Course image"
                    />
                    <div class="position-absolute bottom-0 end-0 m-3">
                        <span
                            class="badge btn-default text-white fs-5 px-3 py-2"
                            >${{ coursePrice?.toFixed(2) }}</span
                        >
                    </div>
                </div>
                <div class="row g-3 mb-4">
                    <div class="col-6">
                        <div class="card border-0 shadow-sm h-100">
                            <div class="card-body text-center py-3">
                                <i
                                    class="bi bi-calendar-check-fill text-primary fs-4 mb-2"
                                ></i>
                                <h6 class="mb-1">Start Date</h6>
                                <p class="small text-muted mb-0">
                                    {{ course?.startDate }}
                                </p>
                            </div>
                        </div>
                    </div>
                    <div class="col-6">
                        <div class="card border-0 shadow-sm h-100">
                            <div class="card-body text-center py-3">
                                <i
                                    class="bi bi-calendar-check-fill text-primary fs-4 mb-2"
                                ></i>
                                <h6 class="mb-1">Start Date</h6>
                                <p class="small text-muted mb-0">
                                    {{ course?.endDate }}
                                </p>
                            </div>
                        </div>
                    </div>
                </div>
                <h5 class="fw-semibold mb-3">Course Description</h5>
                <p
                    class="text-muted mb-4"
                    [innerHTML]="getSanitizedContent(course?.description || '')"
                ></p>

                <!-- <h5 class="fw-semibold mb-3">What You'll Learn</h5>
                <ul class="list-unstyled mb-4">
                    <li class="mb-2 d-flex align-items-start">
                        <i
                            class="bi bi-check-circle-fill text-success me-2 mt-1"
                        ></i>
                        <span
                            >Master fundamental concepts and advanced
                            techniques</span
                        >
                    </li>
                    <li class="mb-2 d-flex align-items-start">
                        <i
                            class="bi bi-check-circle-fill text-success me-2 mt-1"
                        ></i>
                        <span>Apply knowledge through practical exercises</span>
                    </li>
                    <li class="mb-2 d-flex align-items-start">
                        <i
                            class="bi bi-check-circle-fill text-success me-2 mt-1"
                        ></i>
                        <span>Develop portfolio-worthy projects</span>
                    </li>
                    <li class="mb-2 d-flex align-items-start">
                        <i
                            class="bi bi-check-circle-fill text-success me-2 mt-1"
                        ></i>
                        <span>Gain industry-recognized certification</span>
                    </li>
                </ul> -->

                <!-- <h5 class="fw-semibold mb-3">Course Curriculum</h5>
                <div class="accordion mb-4" id="curriculumAccordion">
                    <div class="accordion-item border-0 mb-2 shadow-sm">
                        <h6 class="accordion-header">
                            <button
                                class="accordion-button collapsed"
                                type="button"
                                data-bs-toggle="collapse"
                                data-bs-target="#module1"
                            >
                                Module 1: Introduction
                            </button>
                        </h6>
                        <div
                            id="module1"
                            class="accordion-collapse collapse"
                            data-bs-parent="#curriculumAccordion"
                        >
                            <div class="accordion-body">
                                <ul class="list-unstyled">
                                    <li class="mb-2 d-flex align-items-center">
                                        <i
                                            class="bi bi-play-circle text-muted me-2"
                                        ></i>
                                        <span>Welcome to the Course</span>
                                        <span class="ms-auto small text-muted"
                                            >5 min</span
                                        >
                                    </li>
                                    <li class="mb-2 d-flex align-items-center">
                                        <i
                                            class="bi bi-play-circle text-muted me-2"
                                        ></i>
                                        <span>Course Overview</span>
                                        <span class="ms-auto small text-muted"
                                            >12 min</span
                                        >
                                    </li>
                                </ul>
                            </div>
                        </div>
                    </div>
                    <div class="accordion-item border-0 mb-2 shadow-sm">
                        <h6 class="accordion-header">
                            <button
                                class="accordion-button collapsed"
                                type="button"
                                data-bs-toggle="collapse"
                                data-bs-target="#module2"
                            >
                                Module 2: Core Concepts
                            </button>
                        </h6>
                        <div
                            id="module2"
                            class="accordion-collapse collapse"
                            data-bs-parent="#curriculumAccordion"
                        >
                            <div class="accordion-body">
                                <ul class="list-unstyled">
                                    <li class="mb-2 d-flex align-items-center">
                                        <i
                                            class="bi bi-play-circle text-muted me-2"
                                        ></i>
                                        <span>Understanding Fundamentals</span>
                                        <span class="ms-auto small text-muted"
                                            >18 min</span
                                        >
                                    </li>
                                </ul>
                            </div>
                        </div>
                    </div>
                </div> -->
            </div>

            <!-- Instructor Tab -->
            <div class="tab-pane fade" id="instructor" role="tabpanel">
                <div class="card border-0 shadow-sm mb-4">
                    <div class="card-body">
                        <div class="d-flex align-items-center mb-4">
                            <img
                                [src]="
                                    getImagePath(
                                        instructor?.profilePicture ||
                                            'assets/images/teams/team1.jpg'
                                    )
                                "
                                class="rounded-circle me-3 border border-3 border-primary"
                                width="80"
                                height="80"
                                alt="Instructor"
                            />
                            <div>
                                <h5 class="mb-1 fw-semibold">
                                    {{ instructor?.firstName }}
                                    {{ instructor?.lastName }}
                                </h5>
                                <p class="text-muted mb-2">
                                    {{
                                        instructor?.certification ||
                                            "Senior Developer"
                                    }}
                                </p>
                                <div class="d-flex align-items-center">
                                    <div class="text-warning small me-2">
                                        <i class="bi bi-star-fill"></i>
                                        <i class="bi bi-star-fill"></i>
                                        <i class="bi bi-star-fill"></i>
                                        <i class="bi bi-star-fill"></i>
                                        <i class="bi bi-star-half"></i>
                                    </div>
                                    <span class="text-muted small"
                                        >4.5 instructor rating</span
                                    >
                                </div>
                            </div>
                        </div>

                        <div class="mb-4">
                            <h6 class="fw-semibold mb-2">
                                About the Instructor
                            </h6>
                            <p
                                class="text-muted"
                                [innerHTML]="
                                    getSanitizedContent(
                                        instructor?.description || ''
                                    )
                                "
                            ></p>
                        </div>

                        <div class="row g-2">
                            <div class="col-6">
                                <div
                                    class="d-flex align-items-center text-muted small"
                                >
                                    <i class="bi bi-mortarboard-fill me-2"></i>
                                    <span>12 Courses</span>
                                </div>
                            </div>
                            <div class="col-6">
                                <div
                                    class="d-flex align-items-center text-muted small"
                                >
                                    <i class="bi bi-people-fill me-2"></i>
                                    <span>5,000+ Students</span>
                                </div>
                            </div>
                            <div class="col-6">
                                <div
                                    class="d-flex align-items-center text-muted small"
                                >
                                    <i
                                        class="bi bi-chat-square-text-fill me-2"
                                    ></i>
                                    <span>98% Reviews</span>
                                </div>
                            </div>
                            <div class="col-6">
                                <div
                                    class="d-flex align-items-center text-muted small"
                                >
                                    <i class="bi bi-award-fill me-2"></i>
                                    <span>5 Awards</span>
                                </div>
                            </div>
                        </div>
                    </div>
                </div>

                <!-- <h5 class="fw-semibold mb-3">
                    Other Courses by This Instructor
                </h5>
                <div class="row g-3">
                    <div class="col-12">
                        <div class="card border-0 shadow-sm h-100">
                            <div class="card-body">
                                <div class="d-flex">
                                    <img
                                        src="assets/images/course/course2.jpg"
                                        class="rounded me-3"
                                        width="80"
                                        height="60"
                                        style="object-fit: cover"
                                    />
                                    <div>
                                        <h6 class="mb-1">
                                            Advanced JavaScript Patterns
                                        </h6>
                                        <div
                                            class="d-flex small text-warning mb-1"
                                        >
                                            <i class="bi bi-star-fill"></i>
                                            <i class="bi bi-star-fill"></i>
                                            <i class="bi bi-star-fill"></i>
                                            <i class="bi bi-star-fill"></i>
                                            <i class="bi bi-star-fill"></i>
                                        </div>
                                        <span
                                            class="badge bg-primary bg-opacity-10 text-primary small"
                                            >$149</span
                                        >
                                    </div>
                                </div>
                            </div>
                        </div>
                    </div>
                </div> -->
            </div>

            <!-- Enroll Tab -->
            <div class="tab-pane fade" id="enroll" role="tabpanel">
                <!-- <div class="card border-primary border-2 mb-4">
                    <div class="card-body">
                        <h5 class="card-title fw-semibold mb-3">
                            Course Enrollment
                        </h5>
                        <div
                            class="d-flex justify-content-between align-items-center mb-3"
                        >
                            <span>Course Price:</span>
                            <span class="fw-bold fs-5"
                                >${{ course?.courseId || "199" }}</span
                            >
                        </div>
                        <div
                            class="d-flex justify-content-between align-items-center mb-3"
                        >
                            <span>Discount:</span>
                            <span class="text-success">-$20</span>
                        </div>
                        <hr />
                        <div
                            class="d-flex justify-content-between align-items-center mb-3"
                        >
                            <span class="fw-semibold">Total:</span>
                            <span class="fw-bold fs-5 text-primary"
                                >${{ (course?.courseId || 199) - 20 }}</span
                            >
                        </div>
                    </div>
                </div> -->

                <h5 class="fw-semibold mb-3">Payment Options</h5>
                <div class="mb-4">
                    <div class="form-check mb-2">
                        <input
                            class="form-check-input"
                            type="radio"
                            name="paymentMethod"
                            id="creditCard"
                            checked
                        />
                        <label
                            class="form-check-label d-flex align-items-center"
                            for="creditCard"
                        >
                            <i class="bi bi-credit-card-fill fs-4 me-3"></i>
                            <span>Credit/Debit Card</span>
                        </label>
                    </div>
                    <div class="form-check mb-2">
                        <input
                            class="form-check-input"
                            type="radio"
                            name="paymentMethod"
                            id="paypal"
                        />
                        <label
                            class="form-check-label d-flex align-items-center"
                            for="paypal"
                        >
                            <i class="bi bi-paypal text-primary fs-4 me-3"></i>
                            <span>PayPal</span>
                        </label>
                    </div>
                    <div class="form-check">
                        <input
                            class="form-check-input"
                            type="radio"
                            name="paymentMethod"
                            id="bankTransfer"
                        />
                        <label
                            class="form-check-label d-flex align-items-center"
                            for="bankTransfer"
                        >
                            <i class="bi bi-bank2 fs-4 me-3"></i>
                            <span>Bank Transfer</span>
                        </label>
                    </div>
                </div>

                <div class="d-grid gap-2">
                    <app-payment
                        [paymentData]="{
                           instructor,course,selectedCourse,coursePrice
                        }"
                        [selectedCourseId]="course?.courseId ?? ''"
                    ></app-payment>
                    <!-- <button class="btn btn-primary btn-lg py-3 fw-semibold">
                        <i class="bi bi-lock-fill me-2"></i> Complete Enrollment
                    </button>
                    <button class="btn btn-outline-secondary">
                        <i class="bi bi-heart me-2"></i> Save for Later
                    </button> -->
                </div>
            </div>
        </div>
    </div>
</div>
<!-- <app-contact /> -->

<app-footer />

<app-back-to-top />

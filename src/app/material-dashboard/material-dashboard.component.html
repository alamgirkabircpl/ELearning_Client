<div class="grid-container">
    <h1 class="mat-h1">Dashboard</h1>
    <mat-grid-list cols="2" rowHeight="350px">
        @for (card of cards | async; track card) {
        <mat-grid-tile [colspan]="card.cols" [rowspan]="card.rows">
            <mat-card class="dashboard-card">
                <mat-card-header>
                    <mat-card-title>
                        {{ card.title }}
                        @if (card.title === 'User Table') {
                        <button
                            mat-icon-button
                            class="more-button"
                            [matMenuTriggerFor]="menu"
                            aria-label="Toggle menu"
                        >
                            <mat-icon>more_vert</mat-icon>
                        </button>
                        <mat-menu #menu="matMenu" xPosition="before">
                            <button mat-menu-item>Export</button>
                            <button mat-menu-item>Refresh</button>
                        </mat-menu>
                        }
                    </mat-card-title>
                </mat-card-header>
                <mat-card-content class="dashboard-card-content">
                    @if (card.title === 'Statistics') {
                    <div class="statistics">
                        <div class="stat-item">
                            <mat-icon>people</mat-icon>
                            <span>Total Users: 50</span>
                        </div>
                        <div class="stat-item">
                            <mat-icon>check_circle</mat-icon>
                            <span>Active: 32</span>
                        </div>
                    </div>
                    } @else if (card.title === 'Recent Activity') {
                    <div class="activity-list">
                        <div class="activity-item">
                            <mat-icon>account_circle</mat-icon>
                            <span>User 5 logged in</span>
                        </div>
                        <div class="activity-item">
                            <mat-icon>edit</mat-icon>
                            <span>User 12 updated profile</span>
                        </div>
                    </div>
                    } @else if (card.title === 'User Table') {
                    <div class="table-container">
                        <mat-form-field
                            appearance="outline"
                            class="search-field"
                        >
                            <mat-label>Search</mat-label>
                            <input
                                matInput
                                (keyup)="applyFilter($event)"
                                placeholder="Filter users"
                            />
                            <mat-icon matSuffix>search</mat-icon>
                        </mat-form-field>

                        <div class="table-wrapper">
                            <table mat-table [dataSource]="dataSource" matSort>
                                <!-- ID Column -->
                                <ng-container matColumnDef="id">
                                    <th
                                        mat-header-cell
                                        *matHeaderCellDef
                                        mat-sort-header
                                    >
                                        ID
                                    </th>
                                    <td mat-cell *matCellDef="let row">
                                        {{ row.id }}
                                    </td>
                                </ng-container>

                                <!-- Name Column -->
                                <ng-container matColumnDef="name">
                                    <th
                                        mat-header-cell
                                        *matHeaderCellDef
                                        mat-sort-header
                                    >
                                        Name
                                    </th>
                                    <td mat-cell *matCellDef="let row">
                                        {{ row.name }}
                                    </td>
                                </ng-container>

                                <!-- Email Column -->
                                <ng-container matColumnDef="email">
                                    <th
                                        mat-header-cell
                                        *matHeaderCellDef
                                        mat-sort-header
                                    >
                                        Email
                                    </th>
                                    <td mat-cell *matCellDef="let row">
                                        {{ row.email }}
                                    </td>
                                </ng-container>

                                <!-- Role Column -->
                                <ng-container matColumnDef="role">
                                    <th
                                        mat-header-cell
                                        *matHeaderCellDef
                                        mat-sort-header
                                    >
                                        Role
                                    </th>
                                    <td mat-cell *matCellDef="let row">
                                        {{ row.role }}
                                    </td>
                                </ng-container>

                                <!-- Status Column -->
                                <ng-container matColumnDef="status">
                                    <th
                                        mat-header-cell
                                        *matHeaderCellDef
                                        mat-sort-header
                                    >
                                        Status
                                    </th>
                                    <td mat-cell *matCellDef="let row">
                                        <span
                                            [class]="
                                                'status-badge ' +
                                                row.status.toLowerCase()
                                            "
                                        >
                                            {{ row.status }}
                                        </span>
                                    </td>
                                </ng-container>

                                <tr
                                    mat-header-row
                                    *matHeaderRowDef="displayedColumns"
                                ></tr>
                                <tr
                                    mat-row
                                    *matRowDef="
                                        let row;
                                        columns: displayedColumns
                                    "
                                ></tr>
                            </table>

                            <mat-paginator
                                [pageSizeOptions]="[5, 10, 25]"
                                showFirstLastButtons
                            ></mat-paginator>
                        </div>
                    </div>
                    }
                </mat-card-content>
            </mat-card>
        </mat-grid-tile>
        }
    </mat-grid-list>
</div>
